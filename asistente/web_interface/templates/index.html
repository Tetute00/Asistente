<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Domótico Casa</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Overlay de Login -->
    <div id="login-overlay" class="overlay">
        <div class="login-container">
            <h2><i class="fas fa-home"></i> Domotica</h2>
            <div class="login-form">
                <div class="input-group">
                    <label for="username"><i class="fas fa-user"></i></label>
                    <input type="text" id="username" placeholder="Usuario" required>
                </div>
                <div class="input-group">
                    <label for="password"><i class="fas fa-lock"></i></label>
                    <input type="password" id="password" placeholder="Contraseña" required>
                </div>
                <button id="login-button" class="btn primary">Iniciar sesión</button>
                <p id="login-error" class="error-text"></p>
            </div>
        </div>
    </div>

    <!-- Barra de navegación -->
    <nav class="navbar">
        <div class="navbar-brand">
            <i class="fas fa-home"></i>
            <span>Domotica</span>
        </div>
        <div class="navbar-menu">
            <a href="#dashboard" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
            <a href="#system"><i class="fas fa-microchip"></i> Sistema</a>
            <a href="#remote"><i class="fas fa-network-wired"></i> Remoto</a>
            <a href="#voice"><i class="fas fa-microphone"></i> Asistente</a>
            <a href="#settings"><i class="fas fa-cog"></i> Configuración</a>
        </div>
        <div class="navbar-user">
            <div class="battery-indicator">
                <i class="fas fa-battery-three-quarters"></i>
                <span id="battery-percent">75%</span>
            </div>
            <div class="user-profile">
                <span id="username-display">Usuario</span>
                <button id="logout-button" class="btn small danger"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </div>
    </nav>

    <!-- Contenedor principal -->
    <div class="container">
        <!-- Sección Dashboard -->
        <section id="dashboard" class="page active">
            <h1>Dashboard</h1>
            <div class="grid-container">
                <div class="card system-status">
                    <div class="card-header">
                        <h2><i class="fas fa-server"></i> Estado del Sistema</h2>
                        <span class="refresh-button" data-target="system-status"><i class="fas fa-sync"></i></span>
                    </div>
                    <div class="card-body">
                        <div class="status-item">
                            <span class="status-label">CPU:</span>
                            <div class="progress-bar">
                                <div id="cpu-progress" class="progress" style="width: 25%;">25%</div>
                            </div>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Memoria:</span>
                            <div class="progress-bar">
                                <div id="memory-progress" class="progress" style="width: 40%;">40%</div>
                            </div>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Batería:</span>
                            <div class="progress-bar">
                                <div id="battery-progress" class="progress" style="width: 75%;">75%</div>
                            </div>
                            <span id="battery-status">Cargando - 2:15 restantes</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Sistema:</span>
                            <span id="system-info">Chrome OS - Versión 91.0.4472.167</span>
                        </div>
                    </div>
                </div>

                <div class="card quick-actions">
                    <div class="card-header">
                        <h2><i class="fas fa-bolt"></i> Acciones Rápidas</h2>
                    </div>
                    <div class="card-body">
                        <div class="action-buttons">
                            <button class="action-button" id="btn-mute">
                                <i class="fas fa-volume-mute"></i>
                                <span>Silencio</span>
                            </button>
                            <button class="action-button" id="btn-command">
                                <i class="fas fa-terminal"></i>
                                <span>Comando</span>
                            </button>
                            <button class="action-button" id="btn-refresh">
                                <i class="fas fa-sync"></i>
                                <span>Actualizar</span>
                            </button>
                            <button class="action-button" id="btn-help">
                                <i class="fas fa-question-circle"></i>
                                <span>Ayuda</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card resource-usage">
                    <div class="card-header">
                        <h2><i class="fas fa-chart-line"></i> Uso de Recursos</h2>
                    </div>
                    <div class="card-body">
                        <canvas id="resource-chart"></canvas>
                    </div>
                </div>

                <div class="card activity-log">
                    <div class="card-header">
                        <h2><i class="fas fa-list"></i> Actividad Reciente</h2>
                    </div>
                    <div class="card-body">
                        <ul id="activity-list" class="log-list">
                            <li><span class="time">15:45</span> <span class="event">Usuario inició sesión</span></li>
                            <li><span class="time">15:30</span> <span class="event">Sistema actualizado</span></li>
                            <li><span class="time">15:15</span> <span class="event">Asistente activado</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección Sistema -->
        <section id="system" class="page">
            <h1>Monitor del Sistema</h1>
            <div class="grid-container">
                <div class="card system-details">
                    <div class="card-header">
                        <h2><i class="fas fa-laptop"></i> Detalles del Sistema</h2>
                    </div>
                    <div class="card-body">
                        <table class="info-table">
                            <tr>
                                <th>Sistema Operativo:</th>
                                <td id="os-info">Chrome OS</td>
                            </tr>
                            <tr>
                                <th>Versión:</th>
                                <td id="os-version">91.0.4472.167</td>
                            </tr>
                            <tr>
                                <th>Nombre de Host:</th>
                                <td id="hostname">Chromebook-Usuario</td>
                            </tr>
                            <tr>
                                <th>Procesador:</th>
                                <td id="processor">Intel Celeron N4000</td>
                            </tr>
                            <tr>
                                <th>Tiempo de actividad:</th>
                                <td id="uptime">2 días, 5 horas, 23 minutos</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="card memory-details">
                    <div class="card-header">
                        <h2><i class="fas fa-memory"></i> Memoria</h2>
                    </div>
                    <div class="card-body">
                        <canvas id="memory-chart"></canvas>
                        <div class="memory-stats">
                            <div class="stat-item">
                                <span class="stat-label">Total:</span>
                                <span id="memory-total">4 GB</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Usada:</span>
                                <span id="memory-used">1.8 GB</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Libre:</span>
                                <span id="memory-free">2.2 GB</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card battery-details">
                    <div class="card-header">
                        <h2><i class="fas fa-battery-full"></i> Batería</h2>
                    </div>
                    <div class="card-body">
                        <div class="battery-visual">
                            <div class="battery-icon">
                                <i id="battery-icon" class="fas fa-battery-three-quarters"></i>
                            </div>
                            <div class="battery-level" id="battery-level">75%</div>
                        </div>
                        <div class="battery-info">
                            <div class="info-item">
                                <span class="info-label">Estado:</span>
                                <span id="charging-status">Cargando</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Tiempo restante:</span>
                                <span id="time-remaining">2 horas 15 minutos</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Ciclos:</span>
                                <span id="battery-cycles">230</span>
                            </div>
                        </div>
                        <div class="battery-history">
                            <canvas id="battery-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección Control Remoto -->
        <section id="remote" class="page">
            <h1>Control Remoto</h1>
            <div class="grid-container">
                <div class="card device-list">
                    <div class="card-header">
                        <h2><i class="fas fa-network-wired"></i> Dispositivos</h2>
                        <button id="btn-add-device" class="btn small primary"><i class="fas fa-plus"></i> Añadir</button>
                    </div>
                    <div class="card-body">
                        <table class="devices-table">
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th>Estado</th>
                                    <th>IP</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="devices-table-body">
                                <tr>
                                    <td>PC Principal</td>
                                    <td><span class="status online">Online</span></td>
                                    <td>192.168.1.100</td>
                                    <td>
                                        <button class="btn small info"><i class="fas fa-terminal"></i></button>
                                        <button class="btn small danger"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Raspberry Pi</td>
                                    <td><span class="status offline">Offline</span></td>
                                    <td>192.168.1.101</td>
                                    <td>
                                        <button class="btn small info" disabled><i class="fas fa-terminal"></i></button>
                                        <button class="btn small danger"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card command-console">
                    <div class="card-header">
                        <h2><i class="fas fa-terminal"></i> Consola</h2>
                        <select id="device-selector" class="device-selector">
                            <option value="local">Este dispositivo</option>
                            <option value="pc">PC Principal</option>
                        </select>
                    </div>
                    <div class="card-body">
                        <div class="console">
                            <div id="console-output" class="console-output">
                                <div class="output-line">Sistema listo. Escribe un comando para comenzar.</div>
                            </div>
                            <div class="console-input">
                                <span class="prompt">$</span>
                                <input type="text" id="command-input" placeholder="Escribe un comando...">
                            </div>
                        </div>
                        <div class="quick-commands">
                            <button class="cmd-btn" data-cmd="system_info">Info Sistema</button>
                            <button class="cmd-btn" data-cmd="ip_info">Info Red</button>
                            <button class="cmd-btn" data-cmd="memory_info">Info Memoria</button>
                            <button class="cmd-btn" data-cmd="disk_info">Info Disco</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección Asistente de Voz -->
        <section id="voice" class="page">
            <h1>Asistente de Voz</h1>
            <div class="grid-container">
                <div class="card voice-control">
                    <div class="card-header">
                        <h2><i class="fas fa-microphone"></i> Control por Voz</h2>
                    </div>
                    <div class="card-body">
                        <div class="voice-interface">
                            <div class="voice-visualization">
                                <div class="voice-waves" id="voice-waves"></div>
                            </div>
                            <div class="voice-status" id="voice-status">Esperando...</div>
                            <div class="voice-buttons">
                                <button id="btn-start-listening" class="btn primary large">
                                    <i class="fas fa-microphone"></i> Escuchar
                                </button>
                                <button id="btn-stop-listening" class="btn danger large" disabled>
                                    <i class="fas fa-stop"></i> Detener
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card conversation">
                    <div class="card-header">
                        <h2><i class="fas fa-comments"></i> Conversación</h2>
                        <button id="btn-clear-conversation" class="btn small danger">
                            <i class="fas fa-trash"></i> Limpiar
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="chat-container" id="chat-container">
                            <div class="chat-message system">
                                <div class="message-content">
                                    Hola, soy tu asistente. ¿En qué puedo ayudarte?
                                </div>
                                <div class="message-time">15:30</div>
                            </div>
                            <div class="chat-message user">
                                <div class="message-content">
                                    ¿Qué hora es?
                                </div>
                                <div class="message-time">15:31</div>
                            </div>
                            <div class="chat-message system">
                                <div class="message-content">
                                    Son las 15:31 de la tarde.
                                </div>
                                <div class="message-time">15:31</div>
                            </div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="message-input" placeholder="Escribe un mensaje...">
                            <button id="btn-send-message" class="btn primary">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card commands-list">
                    <div class="card-header">
                        <h2><i class="fas fa-list-ul"></i> Comandos Disponibles</h2>
                    </div>
                    <div class="card-body">
                        <ul class="commands">
                            <li><span class="command-name">¿Qué hora es?</span> - Dice la hora actual</li>
                            <li><span class="command-name">Estado del sistema</span> - Informa sobre el estado</li>
                            <li><span class="command-name">Batería</span> - Informa sobre la batería</li>
                            <li><span class="command-name">Abrir [aplicación]</span> - Abre la aplicación</li>
                            <li><span class="command-name">Buscar [término]</span> - Busca información</li>
                            <li><span class="command-name">Silencio</span> - Activa/desactiva el sonido</li>
                            <li><span class="command-name">Ayuda</span> - Muestra esta lista</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sección Configuración -->
        <section id="settings" class="page">
            <h1>Configuración</h1>
            <div class="grid-container">
                <div class="card user-settings">
                    <div class="card-header">
                        <h2><i class="fas fa-user-cog"></i> Cuenta de Usuario</h2>
                    </div>
                    <div class="card-body">
                        <form id="user-settings-form">
                            <div class="form-group">
                                <label for="current-password">Contraseña Actual:</label>
                                <input type="password" id="current-password" required>
                            </div>
                            <div class="form-group">
                                <label for="new-password">Nueva Contraseña:</label>
                                <input type="password" id="new-password">
                            </div>
                            <div class="form-group">
                                <label for="confirm-password">Confirmar Contraseña:</label>
                                <input type="password" id="confirm-password">
                            </div>
                            <button type="submit" class="btn primary">Guardar Cambios</button>
                        </form>
                    </div>
                </div>

                <div class="card voice-settings">
                    <div class="card-header">
                        <h2><i class="fas fa-sliders-h"></i> Configuración de Voz</h2>
                    </div>
                    <div class="card-body">
                        <form id="voice-settings-form">
                            <div class="form-group">
                                <label for="voice-rate">Velocidad de Voz:</label>
                                <div class="range-container">
                                    <input type="range" id="voice-rate" min="50" max="300" value="150">
                                    <span id="voice-rate-value">150</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="voice-volume">Volumen:</label>
                                <div class="range-container">
                                    <input type="range" id="voice-volume" min="0" max="1" step="0.1" value="0.8">
                                    <span id="voice-volume-value">0.8</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="wake-word">Palabra de activación:</label>
                                <input type="text" id="wake-word" value="casa">
                            </div>
                            <button type="submit" class="btn primary">Guardar Cambios</button>
                            <button type="button" id="btn-test-voice" class="btn info">Probar Voz</button>
                        </form>
                    </div>
                </div>

                <div class="card system-settings">
                    <div class="card-header">
                        <h2><i class="fas fa-cogs"></i> Configuración del Sistema</h2>
                    </div>
                    <div class="card-body">
                        <div class="settings-group">
                            <h3>General</h3>
                            <div class="setting-item">
                                <label>Actualizar cada:</label>
                                <select id="refresh-interval">
                                    <option value="5">5 segundos</option>
                                    <option value="10" selected>10 segundos</option>
                                    <option value="30">30 segundos</option>
                                    <option value="60">1 minuto</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <label>Tema:</label>
                                <select id="theme-selector">
                                    <option value="light">Claro</option>
                                    <option value="dark">Oscuro</option>
                                    <option value="auto" selected>Automático</option>
                                </select>
                            </div>
                        </div>
                        <div class="settings-group">
                            <h3>Avanzado</h3>
                            <div class="setting-item checkbox">
                                <input type="checkbox" id="auto-start" checked>
                                <label for="auto-start">Iniciar con el sistema</label>
                            </div>
                            <div class="setting-item checkbox">
                                <input type="checkbox" id="log-activity" checked>
                                <label for="log-activity">Registrar actividad</label>
                            </div>
                            <div class="setting-item checkbox">
                                <input type="checkbox" id="notifications" checked>
                                <label for="notifications">Mostrar notificaciones</label>
                            </div>
                        </div>
                        <button id="btn-save-system-settings" class="btn primary">Guardar Cambios</button>
                        <button id="btn-reset-settings" class="btn danger">Restablecer</button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal para añadir dispositivo -->
    <div class="modal" id="add-device-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Añadir Dispositivo</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="add-device-form">
                    <div class="form-group">
                        <label for="device-name">Nombre:</label>
                        <input type="text" id="device-name" required>
                    </div>
                    <div class="form-group">
                        <label for="device-ip">Dirección IP:</label>
                        <input type="text" id="device-ip" required pattern="^(?:\d{1,3}\.){3}\d{1,3}$">
                    </div>
                    <div class="form-group">
                        <label for="device-port">Puerto:</label>
                        <input type="number" id="device-port" value="8080" min="1" max="65535" required>
                    </div>
                    <div class="form-group">
                        <label for="device-type">Tipo:</label>
                        <select id="device-type">
                            <option value="api">API</option>
                            <option value="socket">Socket</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="device-token">Token (opcional):</label>
                        <input type="password" id="device-token">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="btn-cancel-add-device" class="btn secondary">Cancelar</button>
                <button id="btn-confirm-add-device" class="btn primary">Añadir</button>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
    <script src="/static/js/charts.js"></script>
    <script src="/static/js/voice.js"></script>
    <script src="/static/js/remote.js"></script>
</body>
</html>